definitions:
  server.AuthResponse:
    properties:
      token:
        type: string
      user:
        $ref: '#/definitions/types.User'
    type: object
  server.CreateReservationRequest:
    properties:
      date:
        type: string
      guestEmail:
        type: string
      guestName:
        type: string
      guestPhone:
        type: string
      guests:
        type: integer
      specialRequests:
        type: string
      tableNumber:
        type: string
      time:
        type: string
    type: object
  server.DeleteResponse:
    properties:
      message:
        type: string
    type: object
  server.ErrorResponse:
    properties:
      details:
        additionalProperties:
          type: string
        type: object
      error:
        type: string
    type: object
  server.LoginRequest:
    description: Login request body
    properties:
      email:
        type: string
      password:
        type: string
    type: object
  server.LogoutResponse:
    properties:
      message:
        type: string
    type: object
  server.RegisterRequest:
    description: Registration request body
    properties:
      email:
        type: string
      name:
        type: string
      password:
        type: string
      phone:
        type: string
    type: object
  server.UpdateReservationRequest:
    properties:
      date:
        type: string
      guestEmail:
        type: string
      guestName:
        type: string
      guestPhone:
        type: string
      guests:
        type: integer
      specialRequests:
        type: string
      tableNumber:
        type: string
      time:
        type: string
    type: object
  server.UpdateReservationStatusRequest:
    properties:
      status:
        type: string
    type: object
  server.UpdateTableAvailabilityRequest:
    properties:
      isAvailable:
        type: boolean
    type: object
  server.UpdateUserRequest:
    properties:
      email:
        type: string
      name:
        type: string
      phone:
        type: string
    type: object
  types.DetailedMonthlyStats:
    properties:
      cancelledReservations:
        type: integer
      completedReservations:
        type: integer
      month:
        type: string
      peakHours:
        items:
          $ref: '#/definitions/types.PeakHour'
        type: array
      popularTables:
        items:
          $ref: '#/definitions/types.PopularTable'
        type: array
      revenue:
        type: number
      totalReservations:
        type: integer
    type: object
  types.MonthlyStats:
    properties:
      cancelledReservations:
        type: integer
      completedReservations:
        type: integer
      month:
        type: string
      revenue:
        type: number
      totalReservations:
        type: integer
    type: object
  types.PeakHour:
    properties:
      count:
        type: integer
      hour:
        type: string
    type: object
  types.PopularTable:
    properties:
      count:
        type: integer
      tableNumber:
        type: string
    type: object
  types.Reservation:
    properties:
      createdAt:
        type: string
      date:
        type: string
      guestEmail:
        type: string
      guestName:
        type: string
      guestPhone:
        type: string
      guests:
        type: integer
      id:
        type: string
      specialRequests:
        type: string
      status:
        type: string
      tableNumber:
        type: string
      time:
        type: string
      updatedAt:
        type: string
      userId:
        type: string
    type: object
  types.Table:
    properties:
      capacity:
        type: integer
      createdAt:
        type: string
      id:
        type: string
      isAvailable:
        type: boolean
      location:
        type: string
      number:
        type: string
      updatedAt:
        type: string
    type: object
  types.User:
    properties:
      createdAt:
        type: string
      email:
        type: string
      id:
        type: string
      name:
        type: string
      phone:
        type: string
      photo:
        type: string
      role:
        type: string
    type: object
info:
  contact: {}
  description: Backend API for university booking system
  title: University Booking API
  version: "1.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate user and return JWT token
      parameters:
      - description: Login request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/server.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.AuthResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "401":
          description: Invalid email or password
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      summary: User login
      tags:
      - Auth
  /auth/logout:
    post:
      description: Invalidate JWT token and remove from cache
      parameters:
      - description: Bearer {token}
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.LogoutResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      summary: Logout user
      tags:
      - Auth
  /auth/me:
    get:
      description: Get authenticated user from JWT token
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.User'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      summary: Get current user
      tags:
      - Auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Create a new user and return JWT token
      parameters:
      - description: Register request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/server.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/server.AuthResponse'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      summary: User registration
      tags:
      - Auth
  /reports/monthly:
    get:
      description: Returns aggregated statistics for all months
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.MonthlyStats'
            type: array
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      summary: Get monthly statistics list
      tags:
      - Reports
  /reports/monthly/{month}:
    get:
      description: Returns detailed statistics for a specific month (YYYY-MM)
      parameters:
      - description: Month in format YYYY-MM
        in: path
        name: month
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.DetailedMonthlyStats'
        "400":
          description: Invalid month format
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Statistics not found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      summary: Get detailed monthly report
      tags:
      - Reports
  /reservations:
    get:
      description: Get reservations for current user (admin â€“ all reservations)
      parameters:
      - description: Filter by status
        in: query
        name: status
        type: string
      - description: Filter by date (YYYY-MM-DD)
        in: query
        name: date
        type: string
      - description: Search
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.Reservation'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get reservations
      tags:
      - Reservations
    post:
      consumes:
      - application/json
      description: Create reservation for authenticated user
      parameters:
      - description: Reservation payload
        in: body
        name: reservation
        required: true
        schema:
          $ref: '#/definitions/server.CreateReservationRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/types.Reservation'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create reservation
      tags:
      - Reservations
  /reservations/{id}:
    delete:
      description: Delete reservation (owner or admin)
      parameters:
      - description: Reservation ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/server.DeleteResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete reservation
      tags:
      - Reservations
    get:
      description: Get single reservation (only owner or admin)
      parameters:
      - description: Reservation ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.Reservation'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get reservation by ID
      tags:
      - Reservations
    patch:
      consumes:
      - application/json
      description: Update reservation fields (owner or admin)
      parameters:
      - description: Reservation ID
        in: path
        name: id
        required: true
        type: string
      - description: Payload
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/server.UpdateReservationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.Reservation'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update reservation
      tags:
      - Reservations
  /reservations/{id}/status:
    patch:
      consumes:
      - application/json
      description: Update reservation status (pending, confirmed, cancelled, completed)
      parameters:
      - description: Reservation ID
        in: path
        name: id
        required: true
        type: string
      - description: Status payload
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/server.UpdateReservationStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.Reservation'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update reservation status
      tags:
      - Reservations
  /reservations/user/{userId}:
    get:
      description: Admin may fetch any user; user may fetch only their own
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.Reservation'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get reservations by user
      tags:
      - Reservations
  /tables:
    get:
      description: Get list of all tables
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.Table'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get all tables
      tags:
      - Tables
  /tables/{id}:
    get:
      description: Get a specific table by ID
      parameters:
      - description: Table ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.Table'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get table by ID
      tags:
      - Tables
  /tables/{id}/availability:
    patch:
      consumes:
      - application/json
      description: Update availability for a specific table
      parameters:
      - description: Table ID
        in: path
        name: id
        required: true
        type: string
      - description: Availability payload
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/server.UpdateTableAvailabilityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.Table'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update table availability
      tags:
      - Tables
  /tables/available:
    get:
      description: Get tables available for specified date/time/guests
      parameters:
      - description: Date (YYYY-MM-DD)
        in: query
        name: date
        type: string
      - description: Time (HH:mm)
        in: query
        name: time
        type: string
      - description: Number of guests
        in: query
        name: guests
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.Table'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get available tables
      tags:
      - Tables
  /users/{id}:
    get:
      description: Get user profile by ID (only self or admin)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user by ID
      tags:
      - Users
    patch:
      consumes:
      - application/json
      description: Update user profile (only self or admin)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: User update payload
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/server.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/server.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/server.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user
      tags:
      - Users
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
